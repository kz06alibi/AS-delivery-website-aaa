(this["webpackJsonpdjango-react-boilerplate"]=this["webpackJsonpdjango-react-boilerplate"]||[]).push([[0],{204:function(e,t,a){e.exports=a(365)},365:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(44),o=a.n(l),c=a(17),i=a(18),s=a(20),u=a(19),d=a(22),m=a(26),h=a(21),p=function(e){return e.children},f=a(33),g=a(387),E=a(388),v=a(379),y=a(389),b=a(385),S=a(384),C=a(45),O=a.n(C),A=function(e){return{type:"AUTH_SUCCESS",token:e}},k=function(e){return{type:"AUTH_FAIL",error:e}},w=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),{type:"AUTH_LOGOUT"}},j=function(e){return function(t){setTimeout((function(){t(w())}),1e3*e)}},D=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.handleChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password;e.props.login(n,r)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.error,a=e.loading,n=e.token,l=this.state,o=l.username,c=l.password;return n?r.a.createElement(h.a,{to:"/"}):r.a.createElement(g.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(g.a.Column,{style:{maxWidth:450}},r.a.createElement(E.a,{as:"h2",color:"teal",textAlign:"center"},"Log-in to your account"),t&&r.a.createElement("p",null,this.props.error.message),r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{size:"large",onSubmit:this.handleSubmit},r.a.createElement(y.a,{stacked:!0},r.a.createElement(v.a.Input,{onChange:this.handleChange,value:o,name:"username",fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username"}),r.a.createElement(v.a.Input,{onChange:this.handleChange,fluid:!0,value:c,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",type:"password"}),r.a.createElement(b.a,{color:"teal",fluid:!0,size:"large",loading:a,disabled:a},"Login"))),r.a.createElement(S.a,null,"New to us? ",r.a.createElement(d.c,{to:"/signup"},"Sign Up")))))}}]),a}(r.a.Component),I=Object(m.b)((function(e){return{loading:e.auth.loading,error:e.auth.error,token:e.auth.token}}),(function(e){return{login:function(t,a){return e(function(e,t){return function(a){a({type:"AUTH_START"}),O.a.post("http://127.0.0.1:8000/rest-auth/login/",{username:e,password:t}).then((function(e){var t=e.data.key,n=new Date((new Date).getTime()+36e5);localStorage.setItem("token",t),localStorage.setItem("expirationDate",n),a(A(t)),a(j(3600))})).catch((function(e){a(k(e))}))}}(t,a))}}}))(D),T=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",email:"",password1:"",password2:""},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.email,l=a.password1,o=a.password2;e.props.signup(n,r,l,o)},e.handleChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.password1,l=e.password2,o=this.props,c=o.error,i=o.loading;return o.token?r.a.createElement(h.a,{to:"/"}):r.a.createElement(g.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(g.a.Column,{style:{maxWidth:450}},r.a.createElement(E.a,{as:"h2",color:"teal",textAlign:"center"},"Signup to your account"),c&&r.a.createElement("p",null,this.props.error.message),r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{size:"large",onSubmit:this.handleSubmit},r.a.createElement(y.a,{stacked:!0},r.a.createElement(v.a.Input,{onChange:this.handleChange,value:t,name:"username",fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username"}),r.a.createElement(v.a.Input,{onChange:this.handleChange,value:a,name:"email",fluid:!0,icon:"mail",iconPosition:"left",placeholder:"E-mail address"}),r.a.createElement(v.a.Input,{onChange:this.handleChange,fluid:!0,value:n,name:"password1",icon:"lock",iconPosition:"left",placeholder:"Password",type:"password"}),r.a.createElement(v.a.Input,{onChange:this.handleChange,fluid:!0,value:l,name:"password2",icon:"lock",iconPosition:"left",placeholder:"Confirm password",type:"password"}),r.a.createElement(b.a,{color:"teal",fluid:!0,size:"large",loading:i,disabled:i},"Signup"))),r.a.createElement(S.a,null,"Already have an account? ",r.a.createElement(d.c,{to:"/login"},"Login")))))}}]),a}(r.a.Component),F=Object(m.b)((function(e){return{loading:e.auth.loading,error:e.auth.error,token:e.auth.token}}),(function(e){return{signup:function(t,a,n,r){return e(function(e,t,a,n){return function(r){r({type:"AUTH_START"}),O.a.post("http://127.0.0.1:8000/rest-auth/registration/",{username:e,email:t,password1:a,password2:n}).then((function(e){var t=e.data.key,a=new Date((new Date).getTime()+36e5);localStorage.setItem("token",t),localStorage.setItem("expirationDate",a),r(A(t)),r(j(3600))})).catch((function(e){r(k(e))}))}}(t,a,n,r))}}}))(T),_=a(390),x=a(196),U=a(375),R=a(70),H=a(376),z=function(){return"undefined"===typeof window?_.a.onlyTablet.minWidth:window.innerWidth},M=function(e){var t=e.mobile;return r.a.createElement(U.a,{text:!0},r.a.createElement(E.a,{as:"h1",content:"AS DELIVERY",inverted:!0,style:{fontSize:t?"4em":"6em",fontWeight:"normal",marginBottom:0,marginTop:t?"1.5em":"2.5em"}}),r.a.createElement(E.a,{as:"h2",content:"So fast so hot",inverted:!0,style:{fontSize:t?"2em":"2.5em",fontWeight:"normal",marginTop:t?"0.5em":"1.5em"}}),r.a.createElement(d.b,{to:"/products"},r.a.createElement(b.a,{primary:!0,size:"huge"},"Order now",r.a.createElement(R.a,{name:"food"}))))},L=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e.hideFixedMenu=function(){return e.setState({fixed:!1})},e.showFixedMenu=function(){return e.setState({fixed:!0})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.children;this.state.fixed;return r.a.createElement(_.a,{getWidth:z,minWidth:_.a.onlyTablet.minWidth},r.a.createElement(H.a,{once:!1,onBottomPassed:this.showFixedMenu,onBottomPassedReverse:this.hideFixedMenu},r.a.createElement(y.a,{inverted:!0,textAlign:"center",style:{minHeight:700,padding:"1em 0em",backgroundImage:"url(".concat("https://jooinn.com/images/italian-food-background-1.jpg",")"),backgroundSize:"cover"},vertical:!0},r.a.createElement(M,null))),e)}}]),a}(n.Component),P=function(e){var t=e.children;return r.a.createElement("div",null,r.a.createElement(L,null,t))},W=function(){return r.a.createElement(P,null,r.a.createElement(y.a,{style:{padding:"8em 0em"},vertical:!0},r.a.createElement(g.a,{container:!0,stackable:!0,verticalAlign:"middle"},r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Column,{width:8},r.a.createElement(E.a,{as:"h1",style:{fontSize:"4em"}},"We have everything that you like to eat"),r.a.createElement("p",{style:{fontSize:"2em"}},"From pizza to burger and fries that you crave or the juiciest doners. Order from us the largest assortment of delicious food.")),r.a.createElement(g.a.Column,{floated:"right",width:8},r.a.createElement(x.a,{bordered:!0,rounded:!0,size:"huge",src:"https://lh3.googleusercontent.com/proxy/vRMpjBBuPsz_9JANz9-Ex6O9RV0b8cIxU73fjUV1t7D2rFObLiWjlJjUEUEqGtcZyE8ErCjwGO4aU2f6JS1QYJbYd5e43AWJH0TcYUX-V7rsCsdtxvJTdR3QDqVhbtfXUPb2-S_6nxxnEnJcIKXCjYQ"}))),r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Column,{floated:"right",width:8},r.a.createElement(x.a,{bordered:!0,rounded:!0,size:"huge",src:"https://i.pinimg.com/originals/08/53/d4/0853d41c51b9d3caf8828520818ee64a.jpg"})),r.a.createElement(g.a.Column,{width:8},r.a.createElement(E.a,{as:"h3",style:{fontSize:"4em"}},"No time to cook? We have options"),r.a.createElement("p",{style:{fontSize:"2em"}},"We will deliver food directly to your door. Or try picking up on your way home. Only we have the fastest delivery in the city."))))),r.a.createElement(y.a,{style:{padding:"8em 0em"},vertical:!0},r.a.createElement(U.a,{text:!0},r.a.createElement(E.a,{as:"h3",style:{fontSize:"4em"}},"About us"),r.a.createElement("p",{style:{fontSize:"2em"}},"We are a start-up food delivery company, however in a short time we managed to gather a large number of customers and get more positive reviews. And we do not stop there and strive for great heights."))))},N=a(383),J=a(377),G=a(380),Y=a(99),q="".concat("http://127.0.0.1:8000").concat("/api"),V="".concat(q,"/products/"),B=function(e){return"".concat(q,"/products/").concat(e,"/")},Q="".concat(q,"/add-to-cart/"),X="".concat(q,"/order-summary/"),Z="".concat(q,"/checkout/"),K="".concat(q,"/add-coupon/"),$="".concat(q,"/countries/"),ee="".concat(q,"/user-id/"),te=function(e){return"".concat(q,"/addresses/?address_type=").concat(e)},ae="".concat(q,"/addresses/create/"),ne=function(e){return"".concat(q,"/addresses/").concat(e,"/update/")},re=function(e){return"".concat(q,"/addresses/").concat(e,"/delete/")},le=function(e){return"".concat(q,"/order-items/").concat(e,"/delete/")},oe="".concat(q,"/order-item/update-quantity/"),ce="".concat(q,"/payments/"),ie=O.a.create({baseURL:q,headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}),se=function(){return function(e){e({type:"CART_START"}),ie.get(X).then((function(t){e({type:"CART_SUCCESS",data:t.data})})).catch((function(t){e({type:"CART_FAIL",error:t})}))}},ue=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,error:null,data:[]},e.handleAddToCart=function(t){e.setState({loading:!0}),ie.post(Q,{slug:t}).then((function(t){e.props.refreshCart(),e.setState({loading:!1})})).catch((function(t){e.setState({error:t,loading:!1})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),O.a.get(V).then((function(t){e.setState({data:t.data,loading:!1})})).catch((function(t){e.setState({error:t,loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.error,l=t.loading;return r.a.createElement(U.a,null,n&&r.a.createElement(S.a,{error:!0,header:"There was some errors with your submission",content:JSON.stringify(n)}),l&&r.a.createElement(y.a,null,r.a.createElement(N.a,{active:!0,inverted:!0},r.a.createElement(J.a,{inverted:!0},"Loading")),r.a.createElement(x.a,{src:"/images/wireframe/short-paragraph.png"})),r.a.createElement(G.a.Group,{divided:!0},a.map((function(t){return r.a.createElement(G.a,{key:t.id},r.a.createElement(G.a.Image,{src:t.image})," \u200e\u200e\u200e\u200f\u200f\u200e \u200e\u200f\u200f\u200e \u200e\u200f\u200f\u200e \u200e\u200f\u200f\u200e \u200e\u200f\u200f\u200e \u200e\u200f\u200f\u200e \u200e\u200f\u200f\u200e",r.a.createElement(G.a,{Price:t.price}),r.a.createElement(G.a.Content,null,r.a.createElement("br",null),r.a.createElement(G.a.Header,{as:"a",onClick:function(){return e.props.history.push("/products/".concat(t.id))}},t.title),r.a.createElement(G.a.Meta,null,r.a.createElement("span",{className:"cinema"},t.category)),r.a.createElement(G.a.Description,null,t.description),r.a.createElement("p",null,r.a.createElement("del",null,"\u20b8",t.price)),r.a.createElement(Y.a,{as:"a",color:"red",tag:!0}," \u20b8",t.discount_price," ")))}))))}}]),a}(r.a.Component),de=Object(m.b)(null,(function(e){return{refreshCart:function(){return e(se())}}}))(ue),me=a(29),he=a(382),pe=a(378),fe=a(374),ge=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,error:null,formVisible:!1,data:[],formData:{}},e.handleToggleForm=function(){var t=e.state.formVisible;e.setState({formVisible:!t})},e.handleFetchItem=function(){var t=e.props.match.params;e.setState({loading:!0}),O.a.get(B(t.productID)).then((function(t){e.setState({data:t.data,loading:!1})})).catch((function(t){e.setState({error:t,loading:!1})}))},e.handleFormatData=function(e){return Object.keys(e).map((function(t){return e[t]}))},e.handleAddToCart=function(t){e.setState({loading:!0});var a=e.state.formData,n=e.handleFormatData(a);ie.post(Q,{slug:t,variations:n}).then((function(t){e.props.refreshCart(),e.setState({loading:!1})})).catch((function(t){e.setState({error:t,loading:!1})}))},e.handleChange=function(t,a){var n=a.name,r=a.value,l=e.state.formData,o=Object(me.a)(Object(me.a)({},l),{},Object(f.a)({},n,r));e.setState({formData:o})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.handleFetchItem()}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.error,l=t.formData,o=t.formVisible,c=t.loading,i=a;return r.a.createElement(U.a,null,n&&r.a.createElement(S.a,{error:!0,header:"There was some errors with your submission",content:JSON.stringify(n)}),c&&r.a.createElement(y.a,null,r.a.createElement(N.a,{active:!0,inverted:!0},r.a.createElement(J.a,{inverted:!0},"Loading")),r.a.createElement(x.a,{src:"/images/wireframe/short-paragraph.png"})),r.a.createElement(g.a,{columns:2,divided:!0},r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Column,null,r.a.createElement(he.a,{fluid:!0,image:i.image,header:i.category,meta:r.a.createElement(r.a.Fragment,null,i.title,"\u200e\u200e\u200e\u200f\u200f\u200e \u200e\u200f\u200f\u200e \u200e\u200f\u200f\u200e",r.a.createElement(Y.a,{as:"a",color:"red",tag:!0}," \u20b8",i.discount_price)),description:i.description,extra:r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{fluid:!0,color:"yellow",floated:"right",icon:!0,labelPosition:"right",onClick:this.handleToggleForm},"Add to cart",r.a.createElement(R.a,{name:"cart plus"})))}),o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(pe.a,null),r.a.createElement(v.a,{onSubmit:function(){return e.handleAddToCart(i.slug)}},a.variations.map((function(t){var a=t.name.toLowerCase();return r.a.createElement(v.a.Field,{key:t.id},r.a.createElement(fe.a,{name:a,onChange:e.handleChange,placeholder:"Select a ".concat(a),fluid:!0,selection:!0,options:t.item_variations.map((function(e){return{key:e.id,text:e.value,value:e.id}})),value:l[a]}))})),r.a.createElement(v.a.Button,{primary:!0},"Add")))),r.a.createElement(g.a.Column,null,r.a.createElement(E.a,{as:"h2"},"Try different variations"),a.variations&&a.variations.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement(E.a,{as:"h3"},e.name),r.a.createElement(G.a.Group,{divided:!0},e.item_variations.map((function(e){return r.a.createElement(G.a,{key:e.id},e.attachment&&r.a.createElement(G.a.Image,{size:"tiny",src:"http://127.0.0.1:8000".concat(e.attachment)}),r.a.createElement(G.a.Content,{verticalAlign:"middle"},e.value))}))))}))))))}}]),a}(r.a.Component),Ee=Object(h.f)(Object(m.b)(null,(function(e){return{refreshCart:function(){return e(se())}}}))(ge)),ve=a(381),ye=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={data:null,error:null,loading:!1},e.handleFetchOrder=function(){e.setState({loading:!0}),ie.get(X).then((function(t){e.setState({data:t.data,loading:!1})})).catch((function(t){404===t.response.status?e.setState({error:"You currently do not have an order",loading:!1}):e.setState({error:t,loading:!1})}))},e.renderVariations=function(e){var t="";return e.item_variations.forEach((function(e){t+="".concat(e.variation.name,": ").concat(e.value,", ")})),t},e.handleFormatData=function(e){return Object.keys(e).map((function(t){return e[t].id}))},e.handleAddToCart=function(t,a){e.setState({loading:!0});var n=e.handleFormatData(a);ie.post(Q,{slug:t,variations:n}).then((function(t){e.handleFetchOrder(),e.setState({loading:!1})})).catch((function(t){e.setState({error:t,loading:!1})}))},e.handleRemoveQuantityFromCart=function(t){ie.post(oe,{slug:t}).then((function(t){e.handleFetchOrder()})).catch((function(t){e.setState({error:t})}))},e.handleRemoveItem=function(t){ie.delete(le(t)).then((function(t){e.handleFetchOrder()})).catch((function(t){e.setState({error:t})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.handleFetchOrder()}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.error,l=t.loading;return this.props.isAuthenticated?(console.log(a),r.a.createElement(U.a,null,r.a.createElement(E.a,null,"Order Summary"),n&&r.a.createElement(S.a,{error:!0,header:"There was an error",content:JSON.stringify(n)}),l&&r.a.createElement(y.a,null,r.a.createElement(N.a,{active:!0,inverted:!0},r.a.createElement(J.a,{inverted:!0},"Loading")),r.a.createElement(x.a,{src:"https://react.semantic-ui.com/images/wireframe/short-paragraph.png"})),a&&r.a.createElement(ve.a,{celled:!0},r.a.createElement(ve.a.Header,null,r.a.createElement(ve.a.Row,null,r.a.createElement(ve.a.HeaderCell,null,"Item #"),r.a.createElement(ve.a.HeaderCell,null,"Item name"),r.a.createElement(ve.a.HeaderCell,null,"Item price"),r.a.createElement(ve.a.HeaderCell,null,"Item quantity"),r.a.createElement(ve.a.HeaderCell,null,"Total item price"))),r.a.createElement(ve.a.Body,null,a.order_items.map((function(t,a){return r.a.createElement(ve.a.Row,{key:t.id},r.a.createElement(ve.a.Cell,null,a+1),r.a.createElement(ve.a.Cell,null,t.item.title," -"," ",e.renderVariations(t)),r.a.createElement(ve.a.Cell,null,"\u20b8",t.item.price),r.a.createElement(ve.a.Cell,{textAlign:"center"},r.a.createElement(R.a,{name:"minus",style:{float:"left",cursor:"pointer"},onClick:function(){return e.handleRemoveQuantityFromCart(t.item.slug)}}),t.quantity,r.a.createElement(R.a,{name:"plus",style:{float:"right",cursor:"pointer"},onClick:function(){return e.handleAddToCart(t.item.slug,t.item_variations)}})),r.a.createElement(ve.a.Cell,null,t.item.discount_price&&r.a.createElement(Y.a,{color:"green",ribbon:!0},"ON DISCOUNT"),"\u20b8",t.final_price,r.a.createElement(R.a,{name:"trash",color:"red",style:{float:"right",cursor:"pointer"},onClick:function(){return e.handleRemoveItem(t.id)}})))})),r.a.createElement(ve.a.Row,null,r.a.createElement(ve.a.Cell,null),r.a.createElement(ve.a.Cell,null),r.a.createElement(ve.a.Cell,null),r.a.createElement(ve.a.Cell,{textAlign:"right",colSpan:"2"},"Order Total: \u20b8",a.total))),r.a.createElement(ve.a.Footer,null,r.a.createElement(ve.a.Row,null,r.a.createElement(ve.a.HeaderCell,{colSpan:"5"},r.a.createElement(d.b,{to:"/checkout"},r.a.createElement(b.a,{floated:"right",color:"yellow"},"Checkout")))))))):r.a.createElement(h.a,{to:"/login"})}}]),a}(r.a.Component),be=Object(m.b)((function(e){return{isAuthenticated:null!==e.auth.token}}))(ye),Se=a(75),Ce=function(e){var t=e.data;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a.Group,{relaxed:!0},t.order_items.map((function(e,t){return r.a.createElement(G.a,{key:t},r.a.createElement(G.a.Image,{size:"tiny",src:"http://127.0.0.1:8000".concat(e.item.image)}),r.a.createElement(G.a.Content,{verticalAlign:"middle"},r.a.createElement(G.a.Header,{as:"a"},e.quantity," x ",e.item.title),r.a.createElement(G.a.Extra,null,r.a.createElement(Y.a,null,"\u20b8",e.final_price))))}))),r.a.createElement(G.a.Group,null,r.a.createElement(G.a,null,r.a.createElement(G.a.Content,null,r.a.createElement(G.a.Header,null,"Order Total: \u20b8",t.total,t.coupon&&r.a.createElement(Y.a,{color:"green",style:{marginLeft:"10px"}},"Current coupon: ",t.coupon.code," for $",t.coupon.amount)))))))},Oe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={code:""},e.handleChange=function(t){e.setState({code:t.target.value})},e.handleSubmit=function(t){var a=e.state.code;e.props.handleAddCoupon(t,a),e.setState({code:""})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.code;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{onSubmit:this.handleSubmit},r.a.createElement(v.a.Field,null,r.a.createElement("label",null,"Coupon code"),r.a.createElement("input",{placeholder:"Enter a coupon..",value:e,onChange:this.handleChange})),r.a.createElement(b.a,{type:"submit"},"Submit")))}}]),a}(n.Component),Ae=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={data:null,loading:!1,error:null,success:!1,shippingAddresses:[],selectedShippingAddress:""},e.handleGetDefaultAddress=function(e){var t=e.filter((function(e){return!0===e.default}));return t.length>0?t[0].id:""},e.handleFetchShippingAddresses=function(){e.setState({loading:!0}),ie.get(te("S")).then((function(t){e.setState({shippingAddresses:t.data.map((function(e){return{key:e.id,text:"".concat(e.street_address,", ").concat(e.apartment_address,", ").concat(e.country),value:e.id}})),selectedShippingAddress:e.handleGetDefaultAddress(t.data),loading:!1})})).catch((function(t){e.setState({error:t,loading:!1})}))},e.handleFetchOrder=function(){e.setState({loading:!0}),ie.get(X).then((function(t){e.setState({data:t.data,loading:!1})})).catch((function(t){404===t.response.status?e.props.history.push("/products"):e.setState({error:t,loading:!1})}))},e.handleAddCoupon=function(t,a){t.preventDefault(),e.setState({loading:!0}),ie.post(K,{code:a}).then((function(t){e.setState({loading:!1}),e.handleFetchOrder()})).catch((function(t){e.setState({error:t,loading:!1})}))},e.handleSelectChange=function(t,a){var n=a.name,r=a.value;e.setState(Object(f.a)({},n,r))},e.submit=function(t){t.preventDefault(),e.setState({loading:!0}),e.props.stripe?e.props.stripe.createToken().then((function(t){if(t.error)e.setState({error:t.error.message,loading:!1});else{e.setState({error:null});var a=e.state.selectedShippingAddress;ie.post(Z,{stripeToken:t.token.id,selectedShippingAddress:a}).then((function(t){e.setState({loading:!1,success:!0})})).catch((function(t){e.setState({loading:!1,error:t})}))}})):console.log("Stripe is not loaded")},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.handleFetchOrder(),this.handleFetchShippingAddresses()}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.error,l=t.loading,o=t.success,c=t.shippingAddresses,i=t.selectedShippingAddress;return r.a.createElement("div",null,n&&r.a.createElement(S.a,{error:!0,header:"There was some errors with your submission",content:JSON.stringify(n)}),l&&r.a.createElement(y.a,null,r.a.createElement(N.a,{active:!0,inverted:!0},r.a.createElement(J.a,{inverted:!0},"Loading")),r.a.createElement(x.a,{src:"/images/wireframe/short-paragraph.png"})),r.a.createElement(Ce,{data:a}),r.a.createElement(pe.a,null),r.a.createElement(Oe,{handleAddCoupon:function(t,a){return e.handleAddCoupon(t,a)}}),r.a.createElement(pe.a,null),r.a.createElement(E.a,null,"Select a shipping address"),c.length>0?r.a.createElement(fe.a,{name:"selectedShippingAddress",value:i,clearable:!0,options:c,selection:!0,onChange:this.handleSelectChange}):r.a.createElement("p",null,"You need to ",r.a.createElement(d.b,{to:"/profile"},"add a shipping address")),r.a.createElement(pe.a,null),c.length<1?r.a.createElement("p",null,"You need to add addresses before you can complete your purchase"):r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,"Would you like to complete the purchase?"),r.a.createElement(Se.CardElement,null),o&&r.a.createElement(S.a,{positive:!0},r.a.createElement(S.a.Header,null,"Your payment was successful"),r.a.createElement("p",null,"Go to your ",r.a.createElement("b",null,"profile")," to see the order delivery status.")),r.a.createElement(b.a,{loading:l,disabled:l,primary:!0,onClick:this.submit,style:{marginTop:"10px"}},"Submit")))}}]),a}(n.Component),ke=Object(h.f)(Object(Se.injectStripe)(Ae)),we=function(){return r.a.createElement(U.a,{text:!0},r.a.createElement(Se.StripeProvider,{apiKey:"pk_test_OJDiZMnL3U35JzUD0L4bMo3q00hHYaA3YY"},r.a.createElement("div",null,r.a.createElement("h1",null,"Complete your order"),r.a.createElement(Se.Elements,null,r.a.createElement(ke,null)))))},je=a(386),De=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={payments:[]},e.handleFetchPayments=function(){e.setState({loading:!0}),ie.get(ce).then((function(t){e.setState({loading:!1,payments:t.data})})).catch((function(t){e.setState({error:t,loading:!1})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.handleFetchPayments()}},{key:"render",value:function(){var e=this.state.payments;return r.a.createElement(ve.a,{celled:!0},r.a.createElement(ve.a.Header,null,r.a.createElement(ve.a.Row,null,r.a.createElement(ve.a.HeaderCell,null,"ID"),r.a.createElement(ve.a.HeaderCell,null,"Amount"),r.a.createElement(ve.a.HeaderCell,null,"Date"))),r.a.createElement(ve.a.Body,null,e.map((function(e){return r.a.createElement(ve.a.Row,{key:e.id},r.a.createElement(ve.a.Cell,null,e.id),r.a.createElement(ve.a.Cell,null,"\u20b8",e.amount),r.a.createElement(ve.a.Cell,null,new Date(e.timestamp).toUTCString()))}))))}}]),a}(r.a.Component),Ie=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={error:null,loading:!1,formData:{address_type:"",apartment_address:"",country:"",default:!1,id:"",street_address:"",user:1,zip:""},saving:!1,success:!1},e.handleToggleDefault=function(){var t=e.state.formData,a=Object(me.a)(Object(me.a)({},t),{},{default:!t.default});e.setState({formData:a})},e.handleChange=function(t){var a=e.state.formData,n=Object(me.a)(Object(me.a)({},a),{},Object(f.a)({},t.target.name,t.target.value));e.setState({formData:n})},e.handleSelectChange=function(t,a){var n=a.name,r=a.value,l=e.state.formData,o=Object(me.a)(Object(me.a)({},l),{},Object(f.a)({},n,r));e.setState({formData:o})},e.handleSubmit=function(t){e.setState({saving:!0}),t.preventDefault(),"UPDATE_FORM"===e.props.formType?e.handleUpdateAddress():e.handleCreateAddress()},e.handleCreateAddress=function(){var t=e.props,a=t.userID,n=(t.activeItem,e.state.formData);ie.post(ae,Object(me.a)(Object(me.a)({},n),{},{user:a,address_type:"S"})).then((function(t){e.setState({saving:!1,success:!0,formData:{default:!1}}),e.props.callback()})).catch((function(t){e.setState({error:t})}))},e.handleUpdateAddress=function(){var t=e.props,a=t.userID,n=(t.activeItem,e.state.formData);ie.put(ne(n.id),Object(me.a)(Object(me.a)({},n),{},{user:a,address_type:"S"})).then((function(t){e.setState({saving:!1,success:!0,formData:{default:!1}}),e.props.callback()})).catch((function(t){e.setState({error:t})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.address;"UPDATE_FORM"===e.formType&&this.setState({formData:t})}},{key:"render",value:function(){var e=this.props.countries,t=this.state,a=t.error,n=t.formData,l=t.success,o=t.saving;return r.a.createElement(v.a,{onSubmit:this.handleSubmit,success:l,error:a},r.a.createElement(v.a.Input,{required:!0,name:"street_address",placeholder:"Street address",onChange:this.handleChange,value:n.street_address}),r.a.createElement(v.a.Input,{required:!0,name:"apartment_address",placeholder:"Apartment address",onChange:this.handleChange,value:n.apartment_address}),r.a.createElement(v.a.Field,{required:!0},r.a.createElement(fe.a,{loading:e.length<1,fluid:!0,clearable:!0,search:!0,options:e,name:"country",placeholder:"Country",onChange:this.handleSelectChange,value:n.country})),r.a.createElement(v.a.Input,{required:!0,name:"zip",placeholder:"Zip code",onChange:this.handleChange,value:n.zip}),r.a.createElement(v.a.Checkbox,{name:"default",label:"Make this the default address?",onChange:this.handleToggleDefault,checked:n.default}),l&&r.a.createElement(S.a,{success:!0,header:"Success!",content:"Your address was saved"}),a&&r.a.createElement(S.a,{error:!0,header:"There was an error",content:JSON.stringify(a)}),r.a.createElement(v.a.Button,{disabled:o,loading:o,primary:!0},"Save"))}}]),a}(r.a.Component),Te=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={activeItem:"shippingAddress",addresses:[],countries:[],userID:null,selectedAddress:null},e.handleItemClick=function(t){e.setState({activeItem:t},(function(){e.handleFetchAddresses()}))},e.handleGetActiveItem=function(){return"shippingAddress"===e.state.activeItem?"Shipping Address":"Payment History"},e.handleFormatCountries=function(e){return Object.keys(e).map((function(t){return{key:t,text:e[t],value:t}}))},e.handleDeleteAddress=function(t){ie.delete(re(t)).then((function(t){e.handleCallback()})).catch((function(t){e.setState({error:t})}))},e.handleSelectAddress=function(t){e.setState({selectedAddress:t})},e.handleFetchUserID=function(){ie.get(ee).then((function(t){e.setState({userID:t.data.userID})})).catch((function(t){e.setState({error:t})}))},e.handleFetchCountries=function(){ie.get($).then((function(t){e.setState({countries:e.handleFormatCountries(t.data)})})).catch((function(t){e.setState({error:t})}))},e.handleFetchAddresses=function(){e.setState({loading:!0});e.state.activeItem;ie.get(te("S")).then((function(t){e.setState({addresses:t.data,loading:!1})})).catch((function(t){e.setState({error:t})}))},e.handleCallback=function(){e.handleFetchAddresses(),e.setState({selectedAddress:null})},e.renderAddresses=function(){var t=e.state,a=t.activeItem,n=t.addresses,l=t.countries,o=t.selectedAddress,c=t.userID;return r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a.Group,null,n.map((function(t){return r.a.createElement(he.a,{key:t.id},r.a.createElement(he.a.Content,null,t.default&&r.a.createElement(Y.a,{as:"a",color:"blue",ribbon:"right"},"Default"),r.a.createElement(he.a.Header,null,t.street_address,", ",t.apartment_address),r.a.createElement(he.a.Meta,null,t.country),r.a.createElement(he.a.Description,null,t.zip)),r.a.createElement(he.a.Content,{extra:!0},r.a.createElement(b.a,{color:"yellow",onClick:function(){return e.handleSelectAddress(t)}},"Update"),r.a.createElement(b.a,{color:"red",onClick:function(){return e.handleDeleteAddress(t.id)}},"Delete")))}))),n.length>0?r.a.createElement(pe.a,null):null,null===o?r.a.createElement(Ie,{activeItem:a,countries:l,formType:"CREATE_FORM",userID:c,callback:e.handleCallback}):null,o&&r.a.createElement(Ie,{activeItem:a,userID:c,countries:l,address:o,formType:"UPDATE_FORM",callback:e.handleCallback}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.handleFetchAddresses(),this.handleFetchCountries(),this.handleFetchUserID()}},{key:"render",value:function(){var e=this,t=this.state,a=t.activeItem,n=t.error,l=t.loading;return this.props.isAuthenticated?r.a.createElement(g.a,{container:!0,columns:2,divided:!0},r.a.createElement(g.a.Row,{columns:1},r.a.createElement(g.a.Column,null,n&&r.a.createElement(S.a,{error:!0,header:"There was an error",content:JSON.stringify(n)}),l&&r.a.createElement(y.a,null,r.a.createElement(N.a,{active:!0,inverted:!0},r.a.createElement(J.a,{inverted:!0},"Loading")),r.a.createElement(x.a,{src:"/images/wireframe/short-paragraph.png"})))),r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Column,{width:6},r.a.createElement(je.a,{pointing:!0,vertical:!0,fluid:!0},r.a.createElement(je.a.Item,{name:"Shipping Address",active:"shippingAddress"===a,onClick:function(){return e.handleItemClick("shippingAddress")}}),r.a.createElement(je.a.Item,{name:"Payment history",active:"paymentHistory"===a,onClick:function(){return e.handleItemClick("paymentHistory")}}))),r.a.createElement(g.a.Column,{width:10},r.a.createElement(E.a,null,this.handleGetActiveItem()),r.a.createElement(pe.a,null),"paymentHistory"===a?r.a.createElement(De,null):this.renderAddresses()))):r.a.createElement(h.a,{to:"/login"})}}]),a}(r.a.Component),Fe=Object(m.b)((function(e){return{isAuthenticated:null!==e.auth.token}}))(Te),_e=function(){return r.a.createElement(p,null,r.a.createElement(h.b,{exact:!0,path:"/products",component:de}),r.a.createElement(h.b,{path:"/products/:productID",component:Ee}),r.a.createElement(h.b,{path:"/login",component:I}),r.a.createElement(h.b,{path:"/signup",component:F}),r.a.createElement(h.b,{path:"/order-summary",component:be}),r.a.createElement(h.b,{path:"/checkout",component:we}),r.a.createElement(h.b,{path:"/profile",component:Fe}),r.a.createElement(h.b,{exact:!0,path:"/",component:W}))},xe=(a(364),a(76)),Ue=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchCart()}},{key:"render",value:function(){var e=this,t=this.props,a=t.authenticated,n=t.cart,l=t.loading;return r.a.createElement("div",null,r.a.createElement(je.a,{inverted:!0},r.a.createElement(U.a,null,r.a.createElement(d.b,{to:"/"},r.a.createElement(je.a.Item,{header:!0},"Home")),r.a.createElement(d.b,{to:"/products"},r.a.createElement(je.a.Item,{header:!0},"Order now")),a?r.a.createElement(r.a.Fragment,null,r.a.createElement(je.a.Menu,{position:"right"},r.a.createElement(d.b,{to:"/profile"},r.a.createElement(je.a.Item,null,"Profile")),r.a.createElement(xe.a,{icon:"cart",loading:l,text:"".concat(null!==n?n.order_items.length:0),pointing:!0,className:"link item"},r.a.createElement(xe.a.Menu,null,null!==n?r.a.createElement(r.a.Fragment,null,n.order_items.map((function(e){return r.a.createElement(xe.a.Item,{key:e.id},e.quantity," x ",e.item.title)})),n.order_items.length<1?r.a.createElement(xe.a.Item,null,"No items in your cart"):null,r.a.createElement(xe.a.Divider,null),r.a.createElement(xe.a.Item,{icon:"arrow right",text:"Checkout",onClick:function(){return e.props.history.push("/order-summary")}})):r.a.createElement(xe.a.Item,null,"Your cart is empty"))),r.a.createElement(je.a.Item,{header:!0,onClick:function(){return e.props.logout()}},"Logout"))):r.a.createElement(je.a.Menu,{position:"right"},r.a.createElement(d.b,{to:"/login"},r.a.createElement(je.a.Item,{header:!0},"Login")),r.a.createElement(d.b,{to:"/signup"},r.a.createElement(je.a.Item,{header:!0},"Signup"))))),this.props.children,r.a.createElement(y.a,{inverted:!0,vertical:!0,style:{margin:"5em 0em 0em",padding:"5em 0em"}},r.a.createElement(U.a,{textAlign:"center"},r.a.createElement(g.a,{divided:!0,inverted:!0,stackable:!0},r.a.createElement(g.a.Column,{textAlign:"center"},r.a.createElement(E.a,{inverted:!0,as:"h3",content:"made by Alibi Nassipkali and Sanzhar Ashimbay"}),r.a.createElement("p",null,"Especially for Networking and Security"))))))}}]),a}(r.a.Component),Re=Object(h.f)(Object(m.b)((function(e){return{authenticated:null!==e.auth.token,cart:e.cart.shoppingCart,loading:e.cart.loading}}),(function(e){return{logout:function(){return e(w())},fetchCart:function(){return e(se())}}}))(Ue)),He=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}},{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(Re,this.props,r.a.createElement(_e,null)))}}]),a}(n.Component),ze=Object(m.b)((function(e){return{isAuthenticated:null!==e.auth.token}}),(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem("token");if(void 0===t)e(w());else{var a=new Date(localStorage.getItem("expirationDate"));a<=new Date?e(w()):(e(A(t)),e(j((a.getTime()-(new Date).getTime())/1e3)))}}))}}}))(He),Me=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Le(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Pe=a(55),We=a(195),Ne=function(e,t){return Object(me.a)(Object(me.a)({},e),t)},Je={token:null,error:null,loading:!1},Ge=function(e,t){return Ne(e,{error:null,loading:!0})},Ye=function(e,t){return Ne(e,{token:t.token,error:null,loading:!1})},qe=function(e,t){return Ne(e,{error:t.error,loading:!1})},Ve=function(e,t){return Ne(e,{token:null})},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return Ge(e);case"AUTH_SUCCESS":return Ye(e,t);case"AUTH_FAIL":return qe(e,t);case"AUTH_LOGOUT":return Ve(e);default:return e}},Qe={shoppingCart:null,error:null,loading:!1},Xe=function(e,t){return Ne(e,{error:null,loading:!0})},Ze=function(e,t){return Ne(e,{shoppingCart:t.data,error:null,loading:!1})},Ke=function(e,t){return Ne(e,{error:t.error,loading:!1})},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CART_START":return Xe(e);case"CART_SUCCESS":return Ze(e,t);case"CART_FAIL":return Ke(e,t);default:return e}},et=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Pe.d,tt=Object(Pe.c)({auth:Be,cart:$e}),at=Object(Pe.e)(tt,et(Object(Pe.a)(We.a))),nt=r.a.createElement(m.a,{store:at},r.a.createElement(ze,null));o.a.render(nt,document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");Me?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Le(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Le(e)}))}}()}},[[204,1,2]]]);
//# sourceMappingURL=main.feae5ee4.chunk.js.map